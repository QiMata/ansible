# Generated by Ansible

server.default_listen_address={{ neo4j_listen_address }}
server.default_advertised_address={{ neo4j_advertised_address }}

server.bolt.enabled=true
server.bolt.listen_address=:{{ neo4j_bolt_port }}
{% if neo4j_tls_client_enable %}
dbms.ssl.policy.bolt.enabled=true
dbms.ssl.policy.bolt.base_directory=certificates/bolt
dbms.connector.bolt.tls_level=REQUIRED
{% endif %}

{% if neo4j_http_enabled %}
server.http.enabled=true
server.http.listen_address=:{{ neo4j_http_port }}
{% else %}
server.http.enabled=false
{% endif %}

{% if neo4j_https_enabled %}
server.https.enabled=true
server.https.listen_address=:{{ neo4j_https_port }}
{% if neo4j_tls_client_enable %}
dbms.ssl.policy.https.enabled=true
dbms.ssl.policy.https.base_directory=certificates/bolt
{% endif %}
{% else %}
server.https.enabled=false
{% endif %}

dbms.security.auth_enabled=true

{% if neo4j_heap_size %}
dbms.memory.heap.initial_size={{ neo4j_heap_size }}
dbms.memory.heap.max_size={{ neo4j_heap_size }}
{% endif %}
{% if neo4j_pagecache_size %}
dbms.memory.pagecache.size={{ neo4j_pagecache_size }}
{% endif %}

{% if neo4j_metrics_enabled %}
server.metrics.prometheus.enabled=true
server.metrics.prometheus.endpoint={{ neo4j_metrics_listen }}
{% endif %}

{% if neo4j_backup_enabled %}
server.backup.enabled=true
server.backup.listen_address={{ neo4j_backup_listen_address }}
{% endif %}

{% if neo4j_cluster_enabled %}
initial.dbms.default_primaries_count={{ neo4j_core_count }}
initial.dbms.default_secondaries_count={{ neo4j_read_replica_count }}
dbms.cluster.endpoints={{ groups['neo4j_cluster'] | default(groups['neo4j_core'] | default([])) | map('extract', hostvars, ['neo4j_advertised_address'], default=inventory_hostname) | join(':6000,') }}:6000
{% if neo4j_tls_cluster_enable %}
dbms.ssl.policy.cluster.enabled=true
dbms.ssl.policy.cluster.base_directory=certificates/cluster
dbms.ssl.policy.cluster.client_auth=REQUIRE
{% endif %}
{% endif %}

