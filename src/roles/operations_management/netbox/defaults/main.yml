---
# Core NetBox paths and ownership
operations_management_netbox_install_dir: "{{ netbox_install_dir | default('/opt/netbox') }}"
operations_management_netbox_user: "{{ netbox_user | default('netbox') }}"

# NetBox installation source
operations_management_netbox_git_repo: "{{ netbox_git_repo | default('https://github.com/netbox-community/netbox.git') }}"
operations_management_netbox_branch: "{{ netbox_branch | default('master') }}"

# Service units and runtime locations
operations_management_netbox_systemd_unit: "{{ netbox_systemd_unit | default('/etc/systemd/system/netbox.service') }}"
operations_management_netbox_python: "{{ netbox_python | default('python3') }}"
operations_management_netbox_venv: "{{ netbox_venv | default('/opt/netbox/venv') }}"
operations_management_netbox_uwsgi_socket: "{{ netbox_uwsgi_socket | default('/run/netbox/netbox.sock') }}"
operations_management_netbox_media_root: "{{ netbox_media_root | default(operations_management_netbox_install_dir ~ '/netbox/media') }}"
operations_management_netbox_static_root: "{{ netbox_static_root | default(operations_management_netbox_install_dir ~ '/netbox/static') }}"

# RQ worker configuration
operations_management_netbox_rq_enabled: "{{ netbox_rq_enabled | default(true) }}"
operations_management_netbox_rq_systemd_unit: "{{ netbox_rq_systemd_unit | default('/etc/systemd/system/netbox-rq.service') }}"
operations_management_netbox_rq_workers: "{{ netbox_rq_workers | default(2) }}"
operations_management_netbox_rq_queues: "{{ netbox_rq_queues | default('default,high,low') }}"

# Gunicorn runtime tuning
operations_management_netbox_gunicorn_workers: "{{ netbox_gunicorn_workers | default(4) }}"
operations_management_netbox_gunicorn_threads: "{{ netbox_gunicorn_threads | default(1) }}"
operations_management_netbox_gunicorn_timeout: "{{ netbox_gunicorn_timeout | default(120) }}"
operations_management_netbox_gunicorn_keepalive: "{{ netbox_gunicorn_keepalive | default(20) }}"
operations_management_netbox_gunicorn_max_requests: "{{ netbox_gunicorn_max_requests | default(5000) }}"
operations_management_netbox_gunicorn_max_requests_jitter: "{{ netbox_gunicorn_max_requests_jitter | default(500) }}"

# Initial administrative user
operations_management_netbox_create_superuser: "{{ netbox_create_superuser | default(false) }}"
operations_management_netbox_superuser_username: "{{ netbox_superuser_username | default('admin') }}"
operations_management_netbox_superuser_email: "{{ netbox_superuser_email | default('admin@example.com') }}"
# operations_management_netbox_superuser_password is intentionally undefined; supply via inventory or vault when required.

# Nginx proxy settings
operations_management_netbox_nginx_enabled: "{{ netbox_nginx_enabled | default(false) }}"
operations_management_netbox_nginx_server_name: "{{ netbox_nginx_server_name | default(inventory_hostname) }}"
operations_management_netbox_nginx_ssl_enabled: "{{ netbox_nginx_ssl_enabled | default(false) }}"
operations_management_netbox_nginx_ssl_cert_path: "{{ netbox_nginx_ssl_cert_path | default('/etc/ssl/certs/netbox.crt') }}"
operations_management_netbox_nginx_ssl_key_path: "{{ netbox_nginx_ssl_key_path | default('/etc/ssl/private/netbox.key') }}"
operations_management_netbox_nginx_client_max_body_size: "{{ netbox_nginx_client_max_body_size | default('25m') }}"

# LDAP/SSO integration
operations_management_netbox_ldap_enabled: "{{ netbox_ldap_enabled | default(false) }}"
operations_management_netbox_ldap_server_uri: "{{ netbox_ldap_server_uri | default('') }}"
operations_management_netbox_ldap_bind_dn: "{{ netbox_ldap_bind_dn | default('') }}"
operations_management_netbox_ldap_bind_password: "{{ netbox_ldap_bind_password | default('') }}"
operations_management_netbox_ldap_user_search_base: "{{ netbox_ldap_user_search_base | default('') }}"
operations_management_netbox_ldap_group_search_base: "{{ netbox_ldap_group_search_base | default('') }}"

# Email delivery
operations_management_netbox_email_enabled: "{{ netbox_email_enabled | default(false) }}"
operations_management_netbox_email_server: "{{ netbox_email_server | default('localhost') }}"
operations_management_netbox_email_port: "{{ netbox_email_port | default(587) }}"
operations_management_netbox_email_use_ssl: "{{ netbox_email_use_ssl | default(false) }}"
operations_management_netbox_email_use_tls: "{{ netbox_email_use_tls | default(true) }}"
operations_management_netbox_email_username: "{{ netbox_email_username | default('') }}"
operations_management_netbox_email_password: "{{ netbox_email_password | default('') }}"
operations_management_netbox_email_from: "{{ netbox_email_from | default('netbox@' ~ inventory_hostname) }}"

# Extensibility
operations_management_netbox_plugins: "{{ netbox_plugins | default('[]') | from_yaml }}"
operations_management_netbox_custom_fields: "{{ netbox_custom_fields | default('[]') | from_yaml }}"

# Webhooks
operations_management_netbox_webhooks_enabled: "{{ netbox_webhooks_enabled | default(true) }}"
operations_management_netbox_webhook_timeout: "{{ netbox_webhook_timeout | default(30) }}"

# Health checks and monitoring
operations_management_netbox_health_check_enabled: "{{ netbox_health_check_enabled | default(true) }}"
operations_management_netbox_health_check_path: "{{ netbox_health_check_path | default('/api/status/') }}"
operations_management_netbox_backup_enabled: "{{ netbox_backup_enabled | default(false) }}"
operations_management_netbox_backup_schedule: "{{ netbox_backup_schedule | default('0 2 * * *') }}"
operations_management_netbox_backup_retention_days: "{{ netbox_backup_retention_days | default(7) }}"
operations_management_netbox_backup_dir: "{{ netbox_backup_dir | default('/opt/netbox/backups') }}"
operations_management_netbox_prometheus_enabled: "{{ netbox_prometheus_enabled | default(false) }}"
operations_management_netbox_prometheus_port: "{{ netbox_prometheus_port | default(9000) }}"

# Security hardening
operations_management_netbox_cors_enabled: "{{ netbox_cors_enabled | default(false) }}"
operations_management_netbox_cors_origins: "{{ netbox_cors_origins | default('[]') | from_yaml }}"
operations_management_netbox_session_cookie_secure: "{{ netbox_session_cookie_secure | default(true) }}"
operations_management_netbox_csrf_cookie_secure: "{{ netbox_csrf_cookie_secure | default(true) }}"
operations_management_netbox_secure_ssl_redirect: "{{ netbox_secure_ssl_redirect | default(false) }}"

# Presentation
operations_management_netbox_debug: "{{ netbox_debug | default(false) }}"
operations_management_netbox_time_zone: "{{ netbox_time_zone | default('UTC') }}"
operations_management_netbox_date_format: "{{ netbox_date_format | default('Y-m-d') }}"
operations_management_netbox_short_date_format: "{{ netbox_short_date_format | default('Y-m-d') }}"
operations_management_netbox_time_format: "{{ netbox_time_format | default('g:i A') }}"
operations_management_netbox_short_time_format: "{{ netbox_short_time_format | default('H:i:s') }}"
operations_management_netbox_datetime_format: "{{ netbox_datetime_format | default('Y-m-d g:i A') }}"
operations_management_netbox_short_datetime_format: "{{ netbox_short_datetime_format | default('Y-m-d H:i') }}"
