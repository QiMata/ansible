---
dependency:
  name: galaxy
  options:
    requirements-file: ../../requirements.yml
driver:
  name: docker
platforms:
  - name: itop-production
    image: debian:12
    privileged: true
    command: /lib/systemd/systemd
    volumes:
      - /sys/fs/cgroup:/sys/fs/cgroup:rw
    cgroupns_mode: host
    pre_build_image: true
    environment:
      DEBIAN_FRONTEND: noninteractive
provisioner:
  name: ansible
  inventory:
    host_vars:
      itop-production:
        itop_enable_ssl: true
        itop_auto_install: true
        itop_enable_monitoring: true
        itop_enable_ldap: false
        itop_db_password: "secure_test_password"
        itop_admin_password: "admin_test_password"
        itop_log_rotation: true
        itop_log_retention_days: 30
  playbooks:
    converge: converge.yml
  config_options:
    defaults:
      callbacks_enabled: profile_tasks
verifier:
  name: testinfra
  options:
    v: 1
