---
# Jenkins agent registration configuration
jenkins_agent_registration_enabled: true
jenkins_agent_registration_controller_host: "{{ groups['jenkins_controllers'][0] | default('localhost') }}"
jenkins_agent_registration_controller_port: "{{ jenkins_controller_http_port | default(8080, true) }}"

# Agent configuration
jenkins_agent_registration_agent_name: "{{ jenkins_agent_name | default(inventory_hostname, true) }}"
jenkins_agent_registration_agent_description: "{{ jenkins_agent_description | default('Auto-provisioned Jenkins agent', true) }}"
jenkins_agent_registration_agent_executors: "{{ jenkins_agent_executors | default(2, true) }}"
jenkins_agent_registration_agent_remote_fs: "{{ jenkins_agent_home | default('/home/jenkins', true) }}"
jenkins_agent_registration_agent_labels: "{{ jenkins_agent_labels | default('linux auto-provisioned', true) }}"
jenkins_agent_registration_agent_usage_mode: "{{ jenkins_agent_usage_mode | default('NORMAL', true) }}"  # NORMAL or EXCLUSIVE

# SSH launcher configuration
jenkins_agent_registration_ssh_host: "{{ jenkins_agent_ssh_host | default(ansible_default_ipv4.address, true) }}"
jenkins_agent_registration_ssh_port: "{{ jenkins_agent_ssh_port | default(22, true) }}"
jenkins_agent_registration_ssh_credential_id: >-
  {{
    jenkins_credentials_ssh_key_id
    | default(
      jenkins_agent_ssh_credential_id | default('jenkins-ssh-key', true),
      true
    )
  }}
jenkins_agent_registration_ssh_java_path: "{{ jenkins_agent_ssh_java_path | default('', true) }}"  # Auto-detect if empty
jenkins_agent_registration_ssh_jvm_options: "{{ jenkins_agent_ssh_jvm_options | default('', true) }}"
jenkins_agent_registration_ssh_prefix_start_slave_cmd: "{{ jenkins_agent_ssh_prefix_start_slave_cmd | default('', true) }}"
jenkins_agent_registration_ssh_suffix_start_slave_cmd: "{{ jenkins_agent_ssh_suffix_start_slave_cmd | default('', true) }}"

# Connection settings
jenkins_agent_registration_retry_wait_time: "{{ jenkins_agent_retry_wait_time | default(15, true) }}"
jenkins_agent_registration_max_num_retries: "{{ jenkins_agent_max_num_retries | default(10, true) }}"
jenkins_agent_registration_keep_alive_strategy: "{{ jenkins_agent_keep_alive_strategy | default('DEFAULT', true) }}"

# Node properties
jenkins_agent_registration_env_vars: "{{ jenkins_agent_env_vars | default({}, true) }}"
# Example:
# jenkins_agent_env_vars:
#   JAVA_HOME: "/usr/lib/jvm/java-11-openjdk-amd64"
#   PATH: "/usr/local/bin:/usr/bin:/bin"

# Tool locations
jenkins_agent_registration_tool_locations: "{{ jenkins_agent_tool_locations | default([], true) }}"
# Example:
# jenkins_agent_tool_locations:
#   - name: "Git"
#     home: "/usr/bin/git"
#   - name: "Maven"
#     home: "/usr/share/maven"
