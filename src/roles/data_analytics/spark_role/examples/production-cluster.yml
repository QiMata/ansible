# ansible-lint: skip_file
example_playbook: |
  ---
  - name: Deploy Production Spark Cluster
    hosts: spark_cluster
    become: true
    vars:
      spark_role_version: "3.4.1"
      spark_role_worker_memory: "8g"
      spark_role_worker_cores: 4
      spark_role_security_enabled: true
      spark_role_ssl_enabled: true
      spark_role_metrics_enabled: true
      spark_role_prometheus_enabled: true
      spark_role_backup_enabled: true
      spark_role_rolling_update_enabled: true
      spark_role_zookeeper_hosts: >-
        {{
          groups['zookeeper_nodes']
          | map('regex_replace', '^(.*)$', '\\1:' ~ (
              hostvars[groups['zookeeper_nodes'][0]].zookeeper_client_port | default(2181)
            ))
          | join(',')
        }}
    roles:
      - role: spark_role
    post_tasks:
      - name: Display deployment summary
        ansible.builtin.debug:
          msg: |
            Spark Cluster Deployment Complete!

            Master Web UI: http://{{ groups['spark_masters'][0] }}:8080
            History Server: http://{{ groups['spark_masters'][0] }}:18080
            Security: {{ 'Enabled' if spark_role_security_enabled else 'Disabled' }}
            Monitoring: {{ 'Enabled' if spark_role_prometheus_enabled else 'Disabled' }}
            Backup: {{ 'Enabled' if spark_role_backup_enabled else 'Disabled' }}
