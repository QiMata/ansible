---
- name: Include SSL setup tasks
  ansible.builtin.include_tasks: setup_ssl.yml
  when: postgresql_ssl_enabled | bool

- name: Include self-signed certificate tasks
  ansible.builtin.include_tasks: self_signed_certs.yml
  when: 
    - postgresql_ssl_enabled | bool
    - postgresql_ssl_self_signed | bool

- name: Include Let's Encrypt certificate tasks
  ansible.builtin.include_tasks: letsencrypt_certs.yml
  when: 
    - postgresql_ssl_enabled | bool
    - postgresql_ssl_letsencrypt | bool

- name: Include custom certificate tasks
  ansible.builtin.include_tasks: custom_certs.yml
  when: 
    - postgresql_ssl_enabled | bool
    - postgresql_ssl_custom_certs | bool

- name: Include SSL configuration tasks
  ansible.builtin.include_tasks: configure_ssl.yml
  when: postgresql_ssl_enabled | bool

- name: Include certificate rotation tasks
  ansible.builtin.include_tasks: cert_rotation.yml
  when: 
    - postgresql_ssl_enabled | bool
    - postgresql_ssl_cert_rotation_enabled | bool
