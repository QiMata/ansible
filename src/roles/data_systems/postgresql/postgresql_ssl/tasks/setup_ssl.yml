---
- name: Install SSL/TLS packages
  ansible.builtin.package:
    name:
      - openssl
      - ca-certificates
    state: present

- name: Create SSL directory
  ansible.builtin.file:
    path: "/etc/postgresql/{{ postgresql_version }}/main"
    state: directory
    owner: postgres
    group: postgres
    mode: '0750'

- name: Create SSL certificates directory
  ansible.builtin.file:
    path: "/etc/postgresql/{{ postgresql_version }}/main/certs"
    state: directory
    owner: postgres
    group: postgres
    mode: '0700'
