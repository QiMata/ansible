- name: Ensure logging directory exists
  file:
    path: "{{ bind9_log_dir }}"
    state: directory
    owner: bind
    group: bind
    mode: '0755'

- name: Configure log rotation
  copy:
    dest: /etc/logrotate.d/bind9
    content: |
      {{ bind9_log_dir }}/*.log {
          weekly
          missingok
          rotate 12
          compress
          delaycompress
          notifempty
          create 644 bind bind
          postrotate
              rndc reconfig
          endscript
      }
