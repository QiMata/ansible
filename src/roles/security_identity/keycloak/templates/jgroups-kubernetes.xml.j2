<?xml version="1.0" encoding="UTF-8"?>
<config xmlns="urn:org:jgroups"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="urn:org:jgroups http://www.jgroups.org/schema/jgroups.xsd">
    
    <TCP bind_addr="{{ keycloak_jgroups_bind_addr }}"
         bind_port="7800"
         recv_buf_size="20m"
         send_buf_size="640k"
         max_bundle_size="31k"
         sock_conn_timeout="300"
         thread_pool.enabled="true"
         thread_pool.min_threads="2"
         thread_pool.max_threads="30"
         thread_pool.keep_alive_time="5000"/>
         
    <KUBE_PING namespace="{{ keycloak_cluster_name }}"
               labels="app=keycloak"
               port_range="0"/>
    
    <MERGE3 min_interval="10000"
            max_interval="30000"/>
            
    <FD_SOCK/>
    
    <FD_ALL timeout="60000"
            interval="15000"/>
            
    <VERIFY_SUSPECT timeout="5000"/>
    
    <pbcast.NAKACK2 use_mcast_xmit="false"
                    log_discard_msgs="false"
                    log_not_found_msgs="false"
                    xmit_interval="100"
                    xmit_table_num_rows="50"
                    xmit_table_msgs_per_row="1024"
                    xmit_table_max_compaction_time="30000"/>
                    
    <UNICAST3 xmit_interval="100"
              xmit_table_num_rows="50"
              xmit_table_msgs_per_row="1024"
              xmit_table_max_compaction_time="30000"/>
              
    <pbcast.STABLE stability_delay="500"
                   desired_avg_gossip="5000"
                   max_bytes="1m"/>
                   
    <pbcast.GMS print_local_addr="false"
                join_timeout="3000"/>
                
    <UFC max_credits="2m"
         min_threshold="0.40"/>
         
    <MFC max_credits="2m"
         min_threshold="0.40"/>
         
    <FRAG2 frag_size="30k"/>
    
</config>
