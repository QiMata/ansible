# Logrotate configuration for APT Mirror enhanced features
# Generated by Ansible - Do not edit manually

/var/log/apt-mirror-health.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 apt-mirror apt-mirror
    postrotate
        systemctl reload apt-mirror-health > /dev/null 2>&1 || true
    endscript
}

/var/log/apt-mirror-gpg.log {
    weekly
    missingok
    rotate 12
    compress
    delaycompress
    notifempty
    create 644 root root
}

/var/log/apt-mirror-alerts.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 apt-mirror apt-mirror
}

/var/log/apache2/apt-mirror-*.log {
    daily
    missingok
    rotate {{ apt_mirror_analytics_retention_days | default(30) }}
    compress
    delaycompress
    notifempty
    create 644 www-data adm
    sharedscripts
    postrotate
        if /etc/init.d/apache2 status > /dev/null ; then \
            /etc/init.d/apache2 reload > /dev/null; \
        fi;
    endscript
}
