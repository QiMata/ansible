---
# APT Mirror Alerting Configuration
# Generated by Ansible - Do not edit manually

email:
{% if apt_mirror_alert_email %}
  enabled: true
  from: "apt-mirror@{{ ansible_fqdn }}"
  to: "{{ apt_mirror_alert_email }}"
  smtp_server: "localhost"
  smtp_port: 25
  use_tls: false
  # username: ""
  # password: ""
{% else %}
  enabled: false
{% endif %}

webhook_url: "{{ apt_mirror_alert_webhook | default('') }}"
slack_webhook: "{{ apt_mirror_alert_slack_webhook | default('') }}"

alerts:
  sync_failure:
    enabled: {{ apt_mirror_alert_on_sync_failure | lower }}
    cooldown: 3600  # 1 hour
    
  storage_threshold:
    enabled: {{ apt_mirror_alert_on_storage_threshold | lower }}
    warning_threshold: {{ apt_mirror_storage_alert_threshold }}
    critical_threshold: {{ apt_mirror_storage_alert_threshold + 10 }}
    cooldown: 1800  # 30 minutes
    
  mirror_unavailable:
    enabled: true
    cooldown: 600  # 10 minutes
    
  service_down:
    enabled: true
    cooldown: 300  # 5 minutes

mirror:
  base_path: "{{ apt_mirror_base_path }}"
  
logging:
  level: "INFO"
  file: "/var/log/apt-mirror-alerts.log"
