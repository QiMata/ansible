---
open_ldap_setup_domain: example.com

# This is the password for admin for openldap
open_ldap_setup_rootpw: passme
# Root dn
open_ldap_setup_rootdn: cn=Manager,{{ open_ldap_setup_basedn }}

open_ldap_setup_app_path: "/etc/ldap/"
open_ldap_setup_user: "openldap"

# SSL-related stuff
open_ldap_setup_enable_tls: false
open_ldap_setup_ssl_cert: "{{ open_ldap_setup_app_path }}/certs/cert.crt"
open_ldap_setup_ssl_key: "{{ open_ldap_setup_app_path }}/certs/my.key"

# Use self-signed certificate
open_ldap_setup_generate_cert: false
# The self signed ssl parameters
open_ldap_setup_ssl:
  country: CZ
  state: Central Bohemia
  location: Prague
  organization: m-cloud.cz

# ACLs - Do not touch unless you know what you're doing
open_ldap_setup_olcaccess:
  - >-
    to attrs=userPassword,shadowLastChange
    by self write
    by anonymous auth
    by * none
  - >-
    to dn.subtree="{{ open_ldap_setup_basedn }}"
    by dn.exact="gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth" manage
    by * read

# internal basedn variable
open_ldap_setup_basedn: "dc={{ open_ldap_setup_domain.split('.')[0] }},dc={{ open_ldap_setup_domain.split('.')[1] }}"
